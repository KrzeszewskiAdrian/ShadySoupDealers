package battlecode.world.maps;

import battlecode.common.GameConstants;
import battlecode.world.MapBuilder;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Random;

/**
 * Generate a map.
 */
public class OmgThisIsProcedural {

    // change this!!!
    public static final String mapName = "OmgThisIsProcedural";

    // don't change this!!
    public static final String outputDirectory = "engine/src/main/battlecode/world/resources/";

    private static int width;
    private static int height;

    /**
     * @param args unused
     */
    public static void main(String[] args) {
        try {
            makeSimple();
        } catch (IOException e) {
            System.out.println(e);
        }
        System.out.println("Generated a map!");
    }

    public static ArrayList<ArrayList<Boolean>> makemap(Boolean contents,int w,int h) {
        ArrayList<ArrayList<Boolean>> arr = new ArrayList<>();
        for (int i=0; i<h; i++) {
            ArrayList<Boolean> b = new ArrayList<>();
            for (int j=0; j<w; j++) {
                b.add(contents);
            }
            arr.add(b);
        }
        return arr;
    }

    public static void makeSimple() throws IOException {
        width = 60;
        height = 64;
        MapBuilder mapBuilder = new MapBuilder(mapName, width, height, 4444);
        mapBuilder.setWaterLevel(0);
        mapBuilder.setSymmetry(MapBuilder.MapSymmetry.vertical);
        mapBuilder.addSymmetricHQ(5, 27);

        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                mapBuilder.setSymmetricDirt(x, y, 3);
            }
        }

        Random r = new Random(12312);

        int[] dys = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,10,10,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,42,42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,43,43,43,43,43,43,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,50,50,50,50,50,50,50,51,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,53,53,53,54,54,54,54,54,54,55,55,55,55,55,55,56,56,56,56,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62};
        int[] dxs = {12,13,25,26,27,28,29,30,31,32,33,34,46,47,9,10,11,12,13,24,25,26,27,28,29,30,31,32,33,34,35,46,47,48,49,50,7,8,9,10,11,12,25,26,27,28,31,32,33,34,47,48,49,50,51,52,3,4,5,6,7,8,9,10,49,50,51,52,53,54,55,56,4,5,6,7,8,9,50,51,52,53,54,55,5,6,7,8,9,10,22,37,49,50,51,52,53,54,5,6,7,8,9,10,11,12,21,22,23,36,37,38,47,48,49,50,51,52,53,54,6,7,8,9,10,11,12,13,22,23,27,28,31,32,36,37,46,47,48,49,50,51,52,53,10,11,12,47,48,49,19,40,1,2,15,19,20,39,40,44,57,58,19,20,21,38,39,40,1,2,7,19,20,21,22,37,38,39,40,52,57,58,5,6,7,8,20,21,22,26,27,28,31,32,33,37,38,39,51,52,53,54,5,6,7,8,21,22,23,26,27,28,29,30,31,32,33,36,37,38,51,52,53,54,6,7,8,9,10,11,12,13,17,21,22,27,28,31,32,37,38,42,46,47,48,49,50,51,52,53,7,8,9,10,11,12,13,14,16,17,18,41,42,43,45,46,47,48,49,50,51,52,7,8,9,10,11,12,13,14,16,17,22,23,36,37,42,43,45,46,47,48,49,50,51,52,6,7,8,9,10,11,12,13,14,22,23,36,37,45,46,47,48,49,50,51,52,53,6,7,8,9,10,11,12,13,14,17,18,21,22,23,36,37,38,41,42,45,46,47,48,49,50,51,52,53,7,8,9,10,11,12,13,16,17,18,19,20,21,22,37,38,39,40,41,42,43,46,47,48,49,50,51,52,9,10,16,17,18,19,20,21,38,39,40,41,42,43,49,50,4,16,17,18,19,20,21,38,39,40,41,42,43,55,4,15,19,20,25,26,27,32,33,34,39,40,44,55,14,15,25,26,27,32,33,34,44,45,8,9,10,13,14,15,26,33,44,45,46,49,50,51,8,9,10,11,12,13,14,15,44,45,46,47,48,49,50,51,7,8,9,10,11,12,13,14,45,46,47,48,49,50,51,52,6,7,10,11,12,13,14,45,46,47,48,49,52,53,1,6,7,8,12,47,51,52,53,58,1,5,6,7,8,9,50,51,52,53,54,58,5,6,7,8,9,10,22,23,24,35,36,37,49,50,51,52,53,54,4,5,6,7,8,9,10,22,23,24,25,26,27,32,33,34,35,36,37,49,50,51,52,53,54,55,5,9,10,22,23,24,25,26,27,28,31,32,33,34,35,36,37,49,50,54,9,10,22,23,24,25,26,27,28,31,32,33,34,35,36,37,49,50,9,10,22,23,24,25,26,27,28,31,32,33,34,35,36,37,49,50,10,22,23,24,27,28,31,32,35,36,37,49,16,17,23,24,26,27,32,33,35,36,42,43,5,16,17,18,26,27,32,33,41,42,43,54,4,5,6,16,17,26,33,42,43,53,54,55,5,6,10,17,42,49,53,54,9,10,11,16,43,48,49,50,9,10,11,14,15,16,17,42,43,44,45,48,49,50,10,11,12,13,14,15,16,17,25,34,42,43,44,45,46,47,48,49,11,12,13,14,15,16,20,24,25,26,33,34,35,39,43,44,45,46,47,48,2,3,11,12,13,14,15,16,19,20,25,34,39,40,43,44,45,46,47,48,56,57,1,2,3,4,5,11,12,13,14,15,16,17,18,19,20,39,40,41,42,43,44,45,46,47,48,54,55,56,57,58,1,2,3,4,5,6,7,11,12,13,15,16,17,18,19,27,32,40,41,42,43,44,46,47,48,52,53,54,55,56,57,58,2,3,7,11,12,16,17,18,26,27,28,31,32,33,41,42,43,47,48,52,56,57,7,16,17,18,26,27,28,31,32,33,41,42,43,52,5,16,17,26,27,32,33,42,43,54,4,5,6,26,27,28,31,32,33,53,54,55,4,5,6,26,27,28,31,32,33,53,54,55,26,27,28,31,32,33,26,27,28,31,32,33,27,28,31,32,7,8,15,16,23,24,25,26,27,28,29,30,31,32,33,34,35,36,43,44,51,52,7,14,15,16,17,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,42,43,44,45,52,3,4,5,15,16,17,18,23,24,25,26,27,28,31,32,33,34,35,36,41,42,43,44,54,55,56,2,3,4,17,18,19,20,27,28,31,32,39,40,41,42,55,56,57,2,3,17,18,19,20,21,27,28,31,32,38,39,40,41,42,56,57,14,18,19,20,39,40,41,45};

        for (int i = 0; i < dxs.length; i++) {
            mapBuilder.setSymmetricDirt(dxs[i],dys[i],10 + (int)Math.floor(r.nextDouble() * 10.0));
        }

        mapBuilder.setSymmetricDirt(59, 44, 3);



//        int[] xs = {0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,10,10,10,10,14,14,16,16,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,33,33,33,33,34,34,35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,40,40,40,40,40,40,41,41,41,41,41,41,42,42,42,42,42,42,42,42,43,43,43,43,43,43,44,44};
//        int[] ys = {10,21,2,3,4,10,21,27,28,29,2,3,4,27,28,29,1,2,3,4,27,28,29,30,2,3,28,29,2,29,8,9,22,23,2,29,2,29,8,9,10,21,22,23,7,8,9,10,11,20,21,22,23,24,6,7,8,9,10,21,22,23,24,25,5,6,7,8,9,22,23,24,25,26,5,6,7,8,23,24,25,26,4,5,6,7,8,23,24,25,26,27,4,5,6,7,24,25,26,27,5,6,7,24,25,26,2,7,8,9,22,23,24,29,2,3,4,5,6,7,8,23,24,25,26,27,28,29,3,4,5,6,7,13,18,24,25,26,27,28,4,5,6,12,13,14,17,18,19,25,26,27,3,4,5,12,13,14,17,18,19,26,27,28,13,18,4,5,6,25,26,27,3,4,5,6,7,8,23,24,25,26,27,28,2,3,4,5,6,25,26,27,28,29,2,3,4,5,6,25,26,27,28,29,1,2,3,28,29,30,10,11,12,19,20,21,11,12,13,18,19,20,11,12,13,14,17,18,19,20,12,13,14,17,18,19,13,18};
//
//        for (int i = 0; i < xs.length; i++) {
//            mapBuilder.setSymmetricSoup(xs[i],ys[i], 50);
//        }


        addLake(mapBuilder, 30, 42, 25, -100);

        mapBuilder.setSymmetricDirt(31,41,GameConstants.MIN_WATER_ELEVATION);


        addSoup(mapBuilder,14,54,19,5);
        addSoup(mapBuilder,2,23,4,8);

        mapBuilder.addSymmetricCow(10,14);
        mapBuilder.addSymmetricCow(20,57);
        mapBuilder.addSymmetricCow(39,39);

        mapBuilder.saveMap(outputDirectory);

    }

    public static void addRectangleDirt(MapBuilder mapBuilder, int xl, int yb, int xr, int yt, int v) {
        for (int i = xl; i < xr+1; i++) {
            for (int j = yb; j < yt+1; j++) {
                mapBuilder.setSymmetricDirt(i, j, v);
                if (((i + j) % 10) == 0 && j >= 35)
                    try {
                        mapBuilder.addSymmetricCow(i, j);
                    } catch (RuntimeException e) {}
            }
        }
    }


    /*
     * Add a nice circular lake centered at (x,y).
     */
    public static void addSoup(MapBuilder mapBuilder, int x, int y, int r2, int v) {
        for (int xx = 0; xx < width; xx++) {
            for (int yy = 0; yy < height; yy++) {
                int d = (xx-x)*(xx-x)/2 + (yy-y)*(yy-y);
                if (d <= r2) {
                    mapBuilder.setSymmetricSoup(xx, yy, v*(d+v));
                }
            }
        }
    }

    /*
     * Add a nice circular lake centered at (x,y).
     */
    public static void addLake(MapBuilder mapBuilder, int x, int y, int r2, int v) {
        for (int xx = 0; xx < width; xx++) {
            for (int yy = 0; yy < height; yy++) {
                int d = (xx-x)*(xx-x) + (yy-y)*(yy-y);
                if (d <= r2) {
                    mapBuilder.setSymmetricWater(xx, yy, true);
                    mapBuilder.setSymmetricDirt(xx, yy, v);
                }
            }
        }
        mapBuilder.setSymmetricDirt(x, y, GameConstants.MIN_WATER_ELEVATION);
    }
}
